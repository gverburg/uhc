%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% AST for HI (Haskell Interface) of modules
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%[20
DATA AGItf
    | AGItf
        module                  : Module
%%]

%%[20
DATA Module
    | Module
        nm                      : HsName
        bindings                : Bindings
%%]

%%[20
DATA Binding
    | Stamp
        srcTimestamp            : String
        srcSig                  : String
        srcVersionMajor         : String
        srcVersionMinor         : String
        srcVersionQuality       : String
        srcVersionSvn           : String
        compileFlags            : String
        hash                    : Integer
    | Export
        visible                 : {Visible}
        exports                 : ModEntRel
    | Fixity
        nm                      : HsName
        prio                    : Int
        fixity                  : Fixity
    | Ids
        idOccs                  : {[(IdOcc,IdOcc)]}
    | Arities
        idArities               : {AssocL HsName Int}
    | GrInlines
        inlMp                   : {AssocL HsName ([HsName],GrExpr)}
    | Val
        nm                      : HsName
        ty                      : Ty
    | DataCon
        nm                      : HsName
        ty                      : Ty
        tags                    : {[(HsName,(CTag,[(HsName,Int)]))]}
        isNewtype               : Bool
    | Ty
        nm                      : HsName
        ty                      : Ty
    | TyKinds
        tyKinds                 : {AssocL TyKiKey Ty}
    | Class
        nm                      : HsName
        prToEvidTy              : Ty
        ruleTy                  : Ty
        nmEvid                  : HsName
    | CHRStore
        chrs					: {[ScopedPredCHR]}
%%]

%%[20
TYPE Bindings                   = [ Binding ]

SET AllBinding
  = Binding Bindings
%%]

%%[20
SET AllNT
  = AllBinding Module
%%]
